@import 'tailwindcss';
@plugin '@tailwindcss/forms';
@plugin '@tailwindcss/typography';

/* Opsilon Font Family */
@font-face {
	font-family: 'Opsilon';
	src: url('/fonts/Opsilon-Regular.ttf') format('truetype');
	font-weight: normal;
	font-style: normal;
	font-display: swap;
}

@font-face {
	font-family: 'Opsilon';
	src: url('/fonts/Opsilon-Italic.ttf') format('truetype');
	font-weight: normal;
	font-style: italic;
	font-display: swap;
}

/* Arc Spirits Design System - Bold Diagonal Edition */
:root {
	/* Primary Dark Theme */
	--color-abyss-black: #0a0404;
	--color-blood-night: #1a0505;
	--color-shadow-purple: #1a1520;
	--color-deep-crimson: #2d0a0a;
	--color-mystic-purple: #2a2035;
	--color-dark-violet: #3a2a40;
	--color-crimson-void: #430d4a;

	/* Accent Colors */
	--color-arcane-gold: #c4a060;
	--color-cream-text: #e8d4b8;
	--color-pale-pink: #fecaca;
	--color-soft-pink: #fca5a5;
	--color-muted-lavender: #a8a0b0;
	--color-dusty-rose: #b89090;
	--color-slate-gray: #908898;

	/* State Colors */
	--color-tainted: #dc2626;
	--color-corrupt: #991b1b;
	--color-fallen: #7f1d1d;
	--color-arcane: #0ea5e9;
	--color-inactive: #64748b;

	/* Effect Colors */
	--color-before-combat: #f59e0b;
	--color-during-combat: #ef4444;
	--color-after-combat: #22c55e;
	--color-combat-type: #8b5cf6;

	/* Diagonal System */
	--diagonal-angle: -8deg;
	--diagonal-skew: skewY(-3deg);
	--diagonal-stripe: repeating-linear-gradient(
		-45deg,
		transparent,
		transparent 2px,
		rgba(196, 160, 96, 0.03) 2px,
		rgba(196, 160, 96, 0.03) 4px
	);
}

/* Base styles */
html {
	scroll-behavior: smooth;
}

body {
	font-family:
		'Segoe UI',
		system-ui,
		-apple-system,
		sans-serif;
	background: linear-gradient(
		135deg,
		var(--color-blood-night) 0%,
		var(--color-crimson-void) 50%,
		#0d0202 100%
	);
	color: var(--color-muted-lavender);
	min-height: 100vh;
	overflow-x: hidden;
}

/* Scrollbar styling */
::-webkit-scrollbar {
	width: 8px;
	height: 8px;
}

::-webkit-scrollbar-track {
	background: var(--color-abyss-black);
}

::-webkit-scrollbar-thumb {
	background: var(--color-dark-violet);
	border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
	background: var(--color-arcane-gold);
}

/* Selection styling */
::selection {
	background: rgba(196, 160, 96, 0.3);
	color: var(--color-cream-text);
}

/* ============================================
   RULES PAGES (TAILWIND @apply)
   ============================================ */
@layer components {
	/* ==========================================
	   TYPOGRAPHY SCALE
	   Standardized sizes for consistent hierarchy
	   ========================================== */

	/* Heading sizes (Opsilon font) */
	/* H1 - Chapter titles */
	/* H2 - Subchapter titles */
	/* H3 - Sub-subchapter titles */
	/* H4 - Card/section headers */
	/* H5 - Nested/minor headers */

	:root {
		/* Typography Scale */
		--text-h1: 1.6rem;      /* Chapter titles */
		--text-h2: 1.1rem;      /* Subchapter titles */
		--text-h3: 0.95rem;     /* Sub-subchapter titles */
		--text-h4: 0.85rem;     /* Card headers, labels */
		--text-h5: 0.75rem;     /* Minor headers, captions */

		--text-body-lg: 1.125rem;  /* Intro paragraphs */
		--text-body: 1rem;         /* Regular content */
		--text-body-sm: 0.875rem;  /* Cards, notes, details */
		--text-caption: 0.75rem;   /* Tags, badges, labels */
		--text-micro: 0.625rem;    /* Very small labels */

		/* Text colors - standardized opacity levels */
		--text-primary: rgba(240, 237, 230, 0.95);    /* Headings */
		--text-secondary: rgba(240, 237, 230, 0.88);  /* Subheadings */
		--text-body-color: rgba(240, 237, 230, 0.72); /* Body text */
		--text-muted: rgba(240, 237, 230, 0.6);       /* Captions, hints */

		/* Gold accent variations */
		--gold-primary: var(--color-arcane-gold);
		--gold-muted: rgba(232, 200, 116, 0.95);

		/* Card styles - standardized */
		--card-bg: rgba(0, 0, 0, 0.2);
		--card-bg-highlight: rgba(196, 160, 96, 0.1);
		--card-border: rgba(196, 160, 96, 0.15);
		--card-border-highlight: rgba(196, 160, 96, 0.32);
		--card-radius: 8px;
		--card-padding: 1.25rem;
	}

	.rules-page {
		@apply relative min-h-screen overflow-x-hidden;
		background: #0a0a0f;
		color: #f0ede6;
		font-family: 'Cormorant Garamond', Georgia, serif;
	}

	.bg-texture,
	.bg-gradient,
	.diagonal-lines {
		@apply pointer-events-none fixed inset-0;
		z-index: 0;
	}

	.bg-texture {
		opacity: 0.03;
		background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
	}

	.bg-gradient {
		background: radial-gradient(ellipse at 20% 0%, rgba(196, 160, 96, 0.08) 0%, transparent 50%),
			radial-gradient(ellipse at 80% 100%, rgba(196, 160, 96, 0.05) 0%, transparent 50%);
	}

	.diagonal-lines {
		@apply overflow-hidden;
	}

	.diag {
		@apply absolute;
		width: 1px;
		height: 200%;
		background: linear-gradient(
			180deg,
			transparent 0%,
			rgba(196, 160, 96, 0.1) 50%,
			transparent 100%
		);
		transform: rotate(-35deg);
		transform-origin: top center;
	}

	.diag-1 {
		left: 15%;
		top: -50%;
	}
	.diag-2 {
		left: 50%;
		top: -50%;
		opacity: 0.5;
	}
	.diag-3 {
		left: 85%;
		top: -50%;
	}

	.top-nav {
		@apply fixed left-0 right-0 top-0 z-[100] flex items-center justify-between px-4 py-4 sm:px-8;
		background: linear-gradient(180deg, rgba(10, 10, 15, 0.98) 0%, rgba(10, 10, 15, 0.9) 100%);
		backdrop-filter: blur(12px);
		border-bottom: 1px solid rgba(196, 160, 96, 0.15);
	}

	.back-link {
		@apply inline-flex items-center gap-2 no-underline transition;
		color: var(--color-arcane-gold);
		font-family: 'Opsilon', sans-serif;
		font-size: 0.85rem;
		text-transform: uppercase;
		letter-spacing: 0.15em;
	}

	.back-link:hover {
		@apply -translate-x-1;
		color: #e8c874;
	}

	.back-icon {
		@apply text-lg;
	}

	.toc-toggle {
		@apply inline-flex items-center gap-2 rounded px-3 py-2 text-xs uppercase tracking-wider transition sm:hidden;
		background: rgba(196, 160, 96, 0.12);
		border: 1px solid rgba(196, 160, 96, 0.18);
		color: var(--color-arcane-gold);
		font-family: 'Opsilon', sans-serif;
	}

	.toc-toggle:hover {
		background: rgba(196, 160, 96, 0.2);
	}

	.toc-sidebar {
		@apply fixed left-0 top-[64px] bottom-0 z-[90] w-[260px] overflow-y-auto border-r;
		background: linear-gradient(135deg, rgba(18, 18, 26, 0.92) 0%, rgba(10, 10, 15, 0.92) 100%);
		border-color: rgba(196, 160, 96, 0.15);
	}

	@media (max-width: 640px) {
		.toc-sidebar {
			@apply -translate-x-full transition-transform duration-300;
		}
		.toc-sidebar.open {
			@apply translate-x-0;
		}
	}

	.toc-header {
		@apply flex items-center justify-center gap-3 px-6 pb-6 pt-8;
		border-bottom: 1px solid rgba(196, 160, 96, 0.15);
	}

	.toc-header h2 {
		@apply m-0;
		color: var(--gold-primary);
		font-family: 'Opsilon', sans-serif;
		font-size: var(--text-h5);
		text-transform: uppercase;
		letter-spacing: 0.2em;
	}

	.toc-ornament {
		@apply text-xs;
		color: rgba(196, 160, 96, 0.6);
	}

	.toc-nav {
		@apply px-3 py-4;
	}

	.toc-list {
		@apply m-0 flex list-decimal flex-col gap-1 pl-6;
	}

	.toc-sublist {
		@apply m-0 flex list-disc flex-col gap-1 pl-5 pt-1;
	}

	.toc-link,
	.toc-sublink {
		@apply w-full rounded px-4 py-2 text-left no-underline transition;
		color: rgba(240, 237, 230, 0.7);
	}

	.toc-sublink {
		@apply px-3 py-1.5 text-sm;
	}

	.toc-link:hover,
	.toc-sublink:hover {
		background: rgba(196, 160, 96, 0.08);
		color: rgba(240, 237, 230, 0.92);
	}

	.toc-link.active,
	.toc-sublink.active {
		background: rgba(196, 160, 96, 0.12);
		color: var(--color-arcane-gold);
	}

	.toc-overlay {
		@apply fixed inset-0 z-[85] border-0 bg-black/50 sm:hidden;
	}

	.rules-main {
		@apply fixed z-[1] mx-auto max-w-[1800px] px-4 pb-24 pt-6 sm:px-6 lg:px-8;
		top: 64px;
		bottom: 0;
		left: 0;
		right: 0;
		overflow-y: auto;
		scroll-behavior: smooth;
		scroll-padding-top: 160px;
	}

	@media (min-width: 640px) {
		.rules-main {
			@apply pl-[300px];
		}
	}

	.rules-main.no-toc {
		@apply pl-4 sm:pl-8;
	}

	.rule-section {
		@apply mb-20;
	}

	.section-header {
		@apply mb-10 flex items-center gap-4;
	}

	.section-icon {
		@apply text-xl;
		color: var(--color-arcane-gold);
	}

	.section-header h2 {
		@apply m-0;
		color: var(--text-primary);
		font-family: 'Opsilon', sans-serif;
		font-size: var(--text-h1);
		letter-spacing: 0.06em;
		text-transform: uppercase;
	}

	.section-line {
		@apply h-px flex-1;
		background: linear-gradient(90deg, rgba(196, 160, 96, 0.35), transparent);
	}

	.content-block {
		@apply mt-6;
	}

	.lead-text {
		@apply leading-7;
		font-size: var(--text-body-lg);
		color: var(--text-body-color);
	}

	.callout-box {
		@apply mt-8 flex gap-4 rounded border;
		padding: var(--card-padding);
		border-radius: var(--card-radius);
		border-color: var(--card-border);
		background: var(--card-bg);
	}

	.callout-icon {
		@apply text-2xl;
	}

	.callout-content h4 {
		@apply m-0;
		color: var(--gold-primary);
		font-family: 'Opsilon', sans-serif;
		font-size: var(--text-h4);
		letter-spacing: 0.12em;
		text-transform: uppercase;
	}

	.callout-content p {
		@apply mb-1 mt-2;
		color: var(--text-body-color);
	}

	.pieces-grid {
		@apply grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3;
	}

	.core-pieces-grid {
		@apply lg:grid-cols-3;
	}

	.core-piece-guardians {
		@apply lg:col-span-1;
	}

	.core-piece-player-mat {
		@apply lg:col-span-2;
	}

	.piece-card {
		@apply rounded border;
		padding: var(--card-padding);
		border-radius: var(--card-radius);
		border-color: var(--card-border);
		background: var(--card-bg);
		font-size: var(--text-body-sm);
		color: var(--text-body-color);
	}

	.piece-card h4 {
		@apply mb-2 mt-0;
		color: var(--gold-primary);
		font-family: 'Opsilon', sans-serif;
		font-size: var(--text-h4);
		letter-spacing: 0.1em;
		text-transform: uppercase;
	}

	.piece-card p {
		@apply m-0 leading-6;
	}

	.piece-icon {
		@apply mb-3 flex items-center gap-2;
	}

	.piece-icon.piece-icon-example-single {
		@apply justify-start;
	}

	.piece-icon.piece-icon-examples {
		@apply flex-wrap;
	}

	.example-thumb {
		@apply inline-block;
		border: none;
		background: transparent;
		box-shadow: none;
	}

	.example-thumb.example-tile {
		width: 84px;
		height: 84px;
		object-fit: contain;
	}

	.example-thumb.example-tile.example-tile-lg {
		width: 132px;
		height: 132px;
	}

	.example-thumb.example-icon {
		width: 60px;
		height: 60px;
		object-fit: contain;
	}

	.example-thumb.example-status-tile {
		width: 96px;
		height: 96px;
		object-fit: contain;
	}

	.example-thumb.example-card {
		width: 84px;
		aspect-ratio: 3 / 4;
		height: auto;
		object-fit: contain;
	}

	.example-thumb.example-card.example-card-lg {
		width: 144px;
	}

	.example-thumb.example-mat {
		width: 360px;
		height: 204px;
		object-fit: contain;
		object-position: center;
	}

	.core-mat-img {
		@apply w-full;
		height: auto;
	}

	.mini-icon {
		width: 22px;
		height: 22px;
		object-fit: contain;
		display: inline-block;
		vertical-align: middle;
	}

	.icon-img {
		width: 40px;
		height: 40px;
		object-fit: contain;
		display: block;
	}

	.status-token-img {
		width: 252px;
		height: auto;
		display: block;
		margin: 0 auto 0.5rem;
	}

	.screenshot-img,
	.board-img {
		@apply block w-full;
		height: auto;
	}

	/* Lists / notes */
	.rule-list {
		@apply mt-3 space-y-1.5 pl-6;
	}

	ul.rule-list {
		@apply list-disc;
	}

	ol.rule-list {
		@apply list-decimal;
	}

	.note-box {
		@apply mt-4 rounded border-l-2 px-4 py-3;
		font-size: var(--text-body-sm);
		background: rgba(196, 160, 96, 0.08);
		border-color: var(--card-border-highlight);
	}

	.example-box {
		@apply mt-4 rounded border px-4 py-3;
		font-size: var(--text-body-sm);
		border-color: var(--card-border);
		background: var(--card-bg);
	}

	.example-label {
		@apply mr-2;
		color: var(--gold-primary);
		font-family: 'Opsilon', sans-serif;
		font-size: var(--text-caption);
		letter-spacing: 0.12em;
		text-transform: uppercase;
	}

	/* Spirit status row */
	.status-progression {
		@apply mt-6 flex flex-col items-center gap-4 sm:flex-row sm:justify-center;
	}

	.status-step {
		@apply flex flex-col items-center;
	}

	.status-name {
		@apply mt-1 uppercase tracking-widest;
		font-size: var(--text-caption);
		color: var(--text-body-color);
		font-family: 'Opsilon', sans-serif;
	}

	.status-arrow {
		@apply text-2xl;
		color: rgba(196, 160, 96, 0.7);
	}

	.status-badge {
		@apply rounded px-2 py-1 text-xs uppercase tracking-wider;
		border: 1px solid rgba(196, 160, 96, 0.25);
		font-family: 'Opsilon', sans-serif;
	}

	.status-badge.pure {
		background: rgba(34, 197, 94, 0.1);
	}
	.status-badge.fallen {
		background: rgba(220, 38, 38, 0.1);
	}

	/* Icon guide */
	.icon-guide-grid {
		@apply lg:grid-cols-3;
	}

	.icon-card h4 {
		@apply flex items-center gap-2;
	}

	.icon-position {
		@apply inline-flex items-center rounded border px-1.5 py-0.5 text-[10px] uppercase tracking-widest;
		border-color: rgba(196, 160, 96, 0.25);
		color: var(--color-arcane-gold);
		background: rgba(0, 0, 0, 0.2);
		font-family: 'Opsilon', sans-serif;
	}

	/* Spirit world */
	.spirit-world-layout {
		@apply grid gap-6 lg:grid-cols-[minmax(280px,1fr)_minmax(0,1.35fr)] lg:items-start;
	}

	.spirit-world-copy p {
		@apply mb-4;
	}

	/* Footer */
	.rules-footer {
		@apply border-t pt-10 text-center;
		border-color: rgba(196, 160, 96, 0.15);
		color: rgba(240, 237, 230, 0.65);
	}

	.footer-link {
		@apply mt-2 inline-block no-underline;
		color: var(--color-arcane-gold);
	}

	.footer-link:hover {
		color: rgba(232, 200, 116, 0.95);
	}

	.footer-ornament {
		@apply mx-auto mb-4 h-px w-24;
		background: linear-gradient(90deg, transparent, rgba(196, 160, 96, 0.5), transparent);
	}

	/* Core pieces tweaks */
	.core-mat-media {
		@apply mb-3;
	}

	.augment-examples {
		@apply flex flex-wrap gap-2;
	}


	.rule-sublist {
		@apply mt-2 space-y-1 pl-8;
	}

	ul.rule-sublist {
		@apply list-disc;
	}

	ol.rule-sublist {
		@apply list-decimal;
	}

	.monster-specific {
		color: rgba(239, 68, 68, 0.9);
	}

	.link-button {
		background: none;
		border: none;
		color: var(--color-arcane-gold);
		text-decoration: underline;
		cursor: pointer;
		padding: 0;
		font: inherit;
	}

	.link-button:hover {
		color: rgba(232, 200, 116, 1);
	}


	/* Artifacts inline */
	.artifact-inline {
		@apply grid gap-6 lg:grid-cols-[minmax(0,1fr)_240px] lg:items-start;
	}

	.artifact-copy {
		@apply min-w-0;
	}

	.artifact-media {
		@apply w-full;
	}

	/* Screenshots */
	.screenshot-link {
		@apply block overflow-hidden rounded border;
		border-radius: var(--card-radius);
		border-color: var(--card-border);
		background: var(--card-bg);
	}

	.screenshot-sheet {
		@apply mt-4 rounded border p-3;
		border-radius: var(--card-radius);
		border-color: var(--card-border);
		background: var(--card-bg);
	}

	/* Player mat layout */
	.player-mat-layout {
		@apply grid gap-6 lg:grid-cols-[minmax(0,1fr)_minmax(0,1.25fr)] lg:items-start;
	}

	.player-mat-copy {
		@apply min-w-0;
	}

	.player-mat-media {
		@apply min-w-0;
	}

	/* Special callout variants */
	.win-condition {
		border-color: rgba(196, 160, 96, 0.28);
		background: rgba(196, 160, 96, 0.06);
	}

	/* Hex spirit table */
	.hex-spirit-header-row {
		@apply flex flex-wrap items-end justify-between gap-3;
	}

	.hex-spirit-view-toggle {
		@apply flex flex-wrap gap-2;
	}

	.hex-spirit-view-toggle button {
		@apply rounded border px-3 py-2 text-xs uppercase tracking-widest;
		border-color: rgba(196, 160, 96, 0.18);
		color: rgba(240, 237, 230, 0.78);
		font-family: 'Opsilon', sans-serif;
		background: rgba(0, 0, 0, 0.15);
	}

	.hex-spirit-view-toggle button.active {
		border-color: rgba(196, 160, 96, 0.42);
		color: rgba(240, 237, 230, 0.95);
		background: rgba(196, 160, 96, 0.12);
	}

	.hex-spirit-origin-list {
		@apply mt-6 grid gap-4;
	}

	.hex-spirit-origin-card {
		@apply rounded border p-4;
		border-radius: var(--card-radius);
		border-color: var(--card-border);
		background: var(--card-bg);
	}

	.hex-spirit-origin-header {
		@apply mb-3 flex items-center justify-between gap-3;
	}

	.hex-spirit-origin-title {
		@apply flex items-center gap-2;
	}

	.hex-spirit-origin-name {
		@apply m-0 text-sm uppercase tracking-widest;
		color: rgba(240, 237, 230, 0.92);
		font-family: 'Opsilon', sans-serif;
	}

	.hex-spirit-origin-count {
		@apply rounded border px-2 py-0.5 text-xs;
		border-color: rgba(196, 160, 96, 0.18);
		color: rgba(240, 237, 230, 0.7);
		background: rgba(0, 0, 0, 0.25);
	}

	.hex-spirit-origin-grid {
		@apply flex flex-wrap gap-1;
	}

	.hex-spirit-table-wrapper {
		@apply mt-6 overflow-x-auto rounded border;
		border-color: rgba(196, 160, 96, 0.15);
		background: rgba(0, 0, 0, 0.15);
	}

	.hex-spirit-table {
		@apply w-full border-separate border-spacing-0 text-sm;
	}

	.hex-spirit-table th,
	.hex-spirit-table td {
		@apply border p-2 align-top;
		border-color: rgba(196, 160, 96, 0.12);
	}

	.hex-spirit-col-header {
		@apply text-center;
		min-width: 160px;
	}

	.hex-spirit-row-header {
		@apply text-center;
		width: 56px;
	}

	.hex-spirit-corner {
		width: 56px;
	}

	.hex-spirit-table thead th {
		position: sticky;
		top: 0;
		z-index: 20;
		background: rgba(10, 10, 15, 0.92);
		backdrop-filter: blur(10px);
	}

	.hex-spirit-row-header {
		position: sticky;
		left: 0;
		z-index: 15;
		background: rgba(10, 10, 15, 0.92);
		backdrop-filter: blur(10px);
	}

	.hex-spirit-corner {
		position: sticky;
		top: 0;
		left: 0;
		z-index: 25;
		background: rgba(10, 10, 15, 0.96);
		backdrop-filter: blur(10px);
	}

	.hex-spirit-cell {
		min-width: 420px;
	}

	.hex-spirit-cell-grid {
		@apply flex flex-wrap gap-1;
	}

	.hex-spirit-thumb {
		@apply block rounded-sm;
		width: 208px;
		height: 208px;
		object-fit: contain;
	}

	.hex-spirit-header-fallback {
		@apply block text-[10px] uppercase tracking-widest;
		color: rgba(240, 237, 230, 0.72);
		font-family: 'Opsilon', sans-serif;
	}

	/* ============================================
	   TREE STRUCTURE SYSTEM
	   Hierarchical indentation for all sections
	   ============================================ */

	/* Chapter container - top level sections */
	.chapter {
		@apply mb-16;
	}

	.chapter-header {
		@apply mb-6 flex items-center gap-4;
	}

	/* Shared title styles */
	.chapter-title,
	.subchapter-title,
	.sub-subchapter-title {
		@apply m-0;
		font-family: 'Opsilon', sans-serif;
		text-transform: uppercase;
	}

	.chapter-title {
		color: var(--text-primary);
		font-size: var(--text-h1);
		letter-spacing: 0.06em;
	}

	.chapter-line {
		@apply h-px flex-1;
		background: linear-gradient(90deg, rgba(196, 160, 96, 0.35), transparent);
	}

	/* Chapter content - clean layout without border-left */
	.chapter-content {
		@apply pl-6 leading-7;
		font-size: var(--text-body);
		color: var(--text-body-color);
	}

	/* Subchapter - nested within chapter */
	.subchapter {
		@apply mt-8;
	}

	.subchapter:first-child {
		@apply mt-0;
	}

	.subchapter-header {
		@apply mb-4 flex items-center gap-3;
	}

	/* Numbered badge - shared base for subchapter-num, sub-subchapter-num, flow-num */
	.subchapter-num,
	.sub-subchapter-num,
	.flow-num {
		display: inline-flex;
		align-items: center;
		justify-content: center;
		font-family: 'Opsilon', monospace;
		font-weight: 600;
	}

	.subchapter-num {
		min-width: 2.25rem;
		height: 1.75rem;
		padding: 0 0.625rem;
		background: rgba(196, 160, 96, 0.18);
		border: 1px solid rgba(196, 160, 96, 0.4);
		border-radius: 5px;
		color: var(--gold-primary);
		font-size: var(--text-h4);
	}

	.subchapter-title {
		color: var(--text-secondary);
		font-size: var(--text-h2);
		letter-spacing: 0.05em;
	}

	/* Subchapter content - minimal indentation, inherits base text from chapter-content */
	.subchapter-content {
		@apply pl-4 leading-7;
		font-size: var(--text-body);
		color: var(--text-body-color);
	}

	/* Sub-subchapter (third level) */
	.sub-subchapter {
		@apply mt-6 pt-2;
	}

	.sub-subchapter-header {
		@apply mb-3 flex items-center gap-3;
	}

	.sub-subchapter-num {
		min-width: 2.5rem;
		height: 1.5rem;
		padding: 0 0.5rem;
		background: rgba(196, 160, 96, 0.14);
		border: 1px solid rgba(196, 160, 96, 0.32);
		border-radius: 4px;
		color: var(--gold-muted);
		font-size: var(--text-caption);
	}

	.flow-num {
		min-width: 2.75rem;
		height: 1.375rem;
		padding: 0 0.5rem;
		background: rgba(196, 160, 96, 0.12);
		border: 1px solid rgba(196, 160, 96, 0.28);
		border-radius: 4px;
		color: var(--gold-primary);
		font-size: var(--text-caption);
	}

	.sub-subchapter-title {
		color: var(--text-secondary);
		font-size: var(--text-h3);
		letter-spacing: 0.04em;
	}


	/* Tree intro text - just adds bottom margin, inherits base text styling */
	.tree-intro {
		@apply mb-4;
	}

	/* Deep nested content - use background tint instead of border */
	.nested-content {
		@apply mt-5;
		background: rgba(0, 0, 0, 0.12);
		border-radius: 10px;
		padding: 1.25rem;
		margin-left: 0.5rem;
	}

	.nested-content .content-card {
		@apply mt-3;
	}

	/* Flow elements (used in rules pages) */
	.flow-subheader {
		@apply mb-3 mt-6 flex items-center gap-3;
		color: var(--text-secondary);
		font-family: 'Opsilon', sans-serif;
		font-size: var(--text-h3);
		letter-spacing: 0.05em;
		text-transform: uppercase;
	}

	h5.flow-subheader {
		@apply mt-5;
		font-size: var(--text-h4);
		color: var(--gold-muted);
	}

	/* Flow intro text - just adds bottom margin, inherits base text styling */
	.flow-intro {
		@apply mb-4;
	}

	/* ============================================
	   TWO-COLUMN LAYOUT WITH FAQ SIDEBAR
	   ============================================ */

	.rules-layout {
		display: grid;
		grid-template-columns: 1fr 340px;
		gap: 2.5rem;
		align-items: start;
	}

	.rules-content {
		min-width: 0; /* Prevent overflow */
	}

	/* FAQ Sidebar */
	.faq-sidebar {
		position: sticky;
		top: 0;
		height: fit-content;
		max-height: calc(100vh - 80px);
		overflow-y: auto;
		padding: 1.25rem;
		background: rgba(0, 0, 0, 0.25);
		border-left: 2px solid rgba(196, 160, 96, 0.3);
		border-radius: 0;
	}

	.sidebar-section {
		margin-bottom: 1.5rem;
		padding-bottom: 1.5rem;
		border-bottom: 1px solid rgba(196, 160, 96, 0.15);
	}

	.sidebar-section:last-child {
		margin-bottom: 0;
		padding-bottom: 0;
		border-bottom: none;
	}

	.sidebar-header {
		display: flex;
		align-items: center;
		gap: 0.625rem;
		margin-bottom: 1rem;
		padding-bottom: 0.75rem;
		border-bottom: 1px solid rgba(196, 160, 96, 0.2);
		color: var(--color-arcane-gold);
		font-family: 'Opsilon', sans-serif;
		font-size: 0.8rem;
		letter-spacing: 0.15em;
		text-transform: uppercase;
	}

	.sidebar-icon {
		display: inline-flex;
		align-items: center;
		justify-content: center;
		width: 1.5rem;
		height: 1.5rem;
		background: rgba(196, 160, 96, 0.2);
		border: 1px solid rgba(196, 160, 96, 0.4);
		border-radius: 50%;
		font-size: 0.75rem;
		font-weight: 700;
	}

	/* Terminology styles */
	.term-item {
		margin-bottom: 1rem;
	}

	.term-item:last-child {
		margin-bottom: 0;
	}

	.term-name {
		margin: 0 0 0.25rem;
		color: var(--text-secondary);
		font-family: 'Opsilon', sans-serif;
		font-size: var(--text-h4);
		font-weight: 600;
	}

	.term-definition {
		margin: 0;
		color: var(--text-muted);
		font-size: var(--text-body-sm);
		line-height: 1.55;
	}

	/* FAQ styles */
	.faq-item {
		margin-bottom: 1.25rem;
		padding-bottom: 1.25rem;
		border-bottom: 1px solid rgba(196, 160, 96, 0.1);
	}

	.faq-item:last-child {
		margin-bottom: 0;
		padding-bottom: 0;
		border-bottom: none;
	}

	.faq-question {
		margin: 0 0 0.5rem;
		color: var(--text-secondary);
		font-family: 'Opsilon', sans-serif;
		font-size: var(--text-h4);
		font-weight: 600;
		line-height: 1.4;
	}

	.faq-answer {
		margin: 0;
		color: var(--text-muted);
		font-size: var(--text-body-sm);
		line-height: 1.55;
	}

	/* Hide FAQ on smaller screens */
	@media (max-width: 1199px) {
		.rules-layout {
			grid-template-columns: 1fr;
		}

		.faq-sidebar {
			display: none;
		}
	}
}
